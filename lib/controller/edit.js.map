{"version":3,"sources":["../../src/controller/edit.js"],"names":["controller","require","BOT_RESPONSES","hears","bot","message","storage","users","get","user","startConversation","err","convo","ask","EDIT_NAME","res","id","team","text","name","next","EDIT_GITHUB_USERNAME","transcript","gitHubName","save","say","EDIT_FAREWELL","stop"],"mappings":";;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,mBAAD,CAA1B;;AACA,IAAMC,aAAa,GAAGD,OAAO,CAAC,0BAAD,CAA7B;;AAEAD,UAAU,CAACG,KAAX,CACE,CAAC,cAAD,CADF,EAEE,uCAFF,EAGE,UAACC,GAAD,EAAMC,OAAN,EAAkB;AAChBL,EAAAA,UAAU,CAACM,OAAX,CAAmBC,KAAnB,CAAyBC,GAAzB,CAA6BH,OAAO,CAACI,IAArC,EAA2C,YAAM;AAC/CL,IAAAA,GAAG,CAACM,iBAAJ,CAAsBL,OAAtB,EAA+B,UAACM,GAAD,EAAMC,KAAN,EAAgB;AAC7C,UAAIH,IAAI,GAAG,EAAX;;AACA,UAAG,CAACE,GAAJ,EAAS;AACPC,QAAAA,KAAK,CAACC,GAAN,CAAUX,aAAa,CAACY,SAAxB,EAAmC,UAACC,GAAD,EAAMH,KAAN,EAAgB;AACjDH,UAAAA,IAAI,GAAG;AACLO,YAAAA,EAAE,EAAEX,OAAO,CAACI,IADP;AAELQ,YAAAA,IAAI,EAAEZ,OAAO,CAACa,IAFT;AAGLC,YAAAA,IAAI,EAAEJ,GAAG,CAACG;AAHL,WAAP;AAKAN,UAAAA,KAAK,CAACQ,IAAN;AACD,SAPD;AAQAR,QAAAA,KAAK,CAACC,GAAN,CACEX,aAAa,CAACmB,oBADhB,EAEE,UAACN,GAAD,EAAMH,KAAN,EAAgB;AAAA,cACNU,UADM,GACSV,KADT,CACNU,UADM;AAEdb,UAAAA,IAAI,CAACc,UAAL,GAAkBD,UAAU,CAAC,CAAD,CAAV,CAAcJ,IAAhC;AACAlB,UAAAA,UAAU,CAACM,OAAX,CAAmBC,KAAnB,CAAyBiB,IAAzB,CAA8Bf,IAA9B;AACAG,UAAAA,KAAK,CAACQ,IAAN;AACD,SAPH;AASAR,QAAAA,KAAK,CAACa,GAAN,CAAUvB,aAAa,CAACwB,aAAxB,EAAuC,UAACX,GAAD,EAAMH,KAAN,EAAgB;AACrDA,UAAAA,KAAK,CAACe,IAAN;AACD,SAFD;AAGD;AACF,KAxBD;AAyBD,GA1BD;AA2BD,CA/BH","sourcesContent":["const controller = require('./spawnController');\nconst BOT_RESPONSES = require('../fixtures/botResponses');\n\ncontroller.hears(\n  ['edit profile'],\n  'direct_message,direct_mention,mention',\n  (bot, message) => {\n    controller.storage.users.get(message.user, () => {\n      bot.startConversation(message, (err, convo) => {\n        let user = {};\n        if(!err) {\n          convo.ask(BOT_RESPONSES.EDIT_NAME, (res, convo) => {\n            user = {\n              id: message.user,\n              team: message.text,\n              name: res.text\n            };\n            convo.next();\n          });\n          convo.ask(\n            BOT_RESPONSES.EDIT_GITHUB_USERNAME,\n            (res, convo) => {\n              const { transcript } = convo;\n              user.gitHubName = transcript[3].text;\n              controller.storage.users.save(user);\n              convo.next();\n            }\n          );\n          convo.say(BOT_RESPONSES.EDIT_FAREWELL, (res, convo) => {\n            convo.stop();\n          });\n        }\n      });\n    });\n  }\n);\n"],"file":"edit.js"}